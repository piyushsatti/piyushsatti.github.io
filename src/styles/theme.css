:root,
[data-theme="dark"] {
  color-scheme: dark;

  /* Core palette based on Terminal CSS dark theme */
  --color-bg: #1a170f;
  --color-surface: #221d14;
  --color-surface-elevated: #2b2418;
  --color-text: #eceae5;
  --color-text-muted: #c7c2b7;
  --color-border: #3b3221;
  --color-border-strong: color-mix(in srgb, var(--color-accent) 35%, transparent);
  --palette-accent: #eec35e;
  --palette-accent-soft: #f4d677;
  --color-accent: var(--palette-accent);
  --color-accent-soft: var(--palette-accent-soft);

  /* Derived tokens consumed throughout the site */
  --background: var(--color-bg);
  --foreground: var(--color-text);
  --accent: var(--color-accent);
  --accent-soft: var(--color-accent-soft);
  --muted-text: var(--color-text-muted);
  --surface: var(--color-surface);
  --surface-elevated: var(--color-surface-elevated);
  --border-color: var(--color-border);
  --border-color-strong: var(--color-border-strong);
  --card-bg: color-mix(in srgb, var(--surface-elevated) 80%, transparent);
  --card-border: var(--border-color-strong);
  --text-color: var(--foreground);
  --code-surface: color-mix(in srgb, var(--color-text) 6%, transparent);
  --code-border: color-mix(in srgb, var(--color-text) 25%, transparent);
  --code-comment: color-mix(in srgb, var(--color-text) 50%, transparent);
  --diff-added: #66ff66;
  --diff-added-soft: color-mix(in srgb, var(--diff-added) 16%, transparent);
  --diff-removed: #ff6666;
  --diff-removed-soft: color-mix(in srgb, var(--diff-removed) 16%, transparent);
  --glow-strong: color-mix(in srgb, var(--color-accent) 55%, transparent);
  --glow-soft: color-mix(in srgb, var(--color-accent) 25%, transparent);
  --background-gradient:
    radial-gradient(
      1200px 800px at 85% -10%,
      color-mix(in srgb, var(--color-accent) 22%, transparent),
      transparent 60%
    ),
    radial-gradient(
      900px 700px at -10% 20%,
      color-mix(in srgb, var(--color-accent-soft) 16%, transparent),
      transparent 55%
    ),
    linear-gradient(
      180deg,
      color-mix(in srgb, var(--color-bg) 90%, #000) 0%,
      var(--color-bg) 100%
    );
  --background-texture:
    repeating-linear-gradient(
      0deg,
      color-mix(in srgb, var(--color-text) 4%, transparent) 0 1px,
      transparent 1px 3px
    ),
    repeating-linear-gradient(
      90deg,
      color-mix(in srgb, var(--color-text) 4%, transparent) 0 1px,
      transparent 1px 3px
    );
}

[data-theme="light"] {
  color-scheme: light;

  /* Light palette inspired by Terminal CSS accents */
  --color-bg: #f4efe4;
  --color-surface: #ffffff;
  --color-surface-elevated: #f0e4cf;
  --color-text: #272011;
  --color-text-muted: #5b4f39;
  --color-border: #cabd9f;
  --color-border-strong: color-mix(in srgb, var(--color-accent) 45%, transparent);
  --palette-accent: #d38a08;
  --palette-accent-soft: #f3b54b;
  --color-accent: var(--palette-accent);
  --color-accent-soft: var(--palette-accent-soft);

  --background: var(--color-bg);
  --foreground: var(--color-text);
  --accent: var(--color-accent);
  --accent-soft: var(--color-accent-soft);
  --muted-text: var(--color-text-muted);
  --surface: var(--color-surface);
  --surface-elevated: var(--color-surface-elevated);
  --border-color: var(--color-border);
  --border-color-strong: var(--color-border-strong);
  --card-bg: color-mix(in srgb, var(--surface-elevated) 92%, transparent);
  --card-border: var(--color-border-strong);
  --text-color: var(--foreground);
  --code-surface: color-mix(in srgb, var(--color-text) 4%, transparent);
  --code-border: color-mix(in srgb, var(--color-text) 18%, transparent);
  --code-comment: color-mix(in srgb, var(--color-text) 60%, transparent);
  --diff-added: #15803d;
  --diff-added-soft: color-mix(in srgb, var(--diff-added) 18%, transparent);
  --diff-removed: #b91c1c;
  --diff-removed-soft: color-mix(in srgb, var(--diff-removed) 18%, transparent);
  --glow-strong: color-mix(in srgb, var(--color-accent) 45%, transparent);
  --glow-soft: color-mix(in srgb, var(--color-accent) 20%, transparent);
  --background-gradient:
    radial-gradient(
      1000px 700px at 80% -10%,
      color-mix(in srgb, var(--color-accent) 18%, transparent),
      transparent 60%
    ),
    radial-gradient(
      900px 600px at -10% 20%,
      color-mix(in srgb, var(--color-accent-soft) 20%, transparent),
      transparent 55%
    ),
    linear-gradient(
      180deg,
      color-mix(in srgb, var(--color-bg) 98%, #fff) 0%,
      var(--color-bg) 100%
    );
  --background-texture:
    repeating-linear-gradient(
      0deg,
      color-mix(in srgb, var(--color-border) 30%, transparent) 0 1px,
      transparent 1px 3px
    ),
    repeating-linear-gradient(
      90deg,
      color-mix(in srgb, var(--color-border) 30%, transparent) 0 1px,
      transparent 1px 3px
    );
}

/* Palette overrides */
[data-palette="amber"] {
  --palette-accent: #eec35e;
  --palette-accent-soft: #f4d677;
}

[data-palette="cobalt"] {
  --palette-accent: #7aa2ff;
  --palette-accent-soft: #9bb8ff;
}

[data-palette="mint"] {
  --palette-accent: #67e8c2;
  --palette-accent-soft: #9af0d3;
}

[data-palette="rose"] {
  --palette-accent: #f87171;
  --palette-accent-soft: #fda4af;
}
